<!DOCTYPE html>
<html>
	<head> 
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no, target-densityDpi=device-dp" />
		<meta name="format-detection" content="telephone=no" />
		<title>作业中心</title>
		<link rel="stylesheet" type="text/css" href="../css/jobIndex.all.css"/>
		<script src="../common/jquery-1.11.2.min.js"></script>
		<script src="../common/setviewport.js"></script>
		<script src="../common/jquery.raty.min.js"></script>
	</head>
	<body class="jobIndex" id="pullLoad">
		<!--上拉刷新-->
    	<div class="loading reload" ><span>正在刷新...</span></div>
		<div class="main">
			<article>
				<dl>
					<dt>
					  <p>作业名称：<span>第一次</span></p>
					</dt>
					<dd type='jiance'>
						<p>
						   <span class="tit">hello</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yitijiao">已提交</span>
						</p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:<span data-score="3" class="xing"></span></span>
						</p>
					</dd>
					<dt>
					  <p>作业名称：<span>第二次</span></p></dt>
					<dd type='renwu'>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="weitijiao">未提交</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">任务</b></span>
							<span class="degree">难度系数:<span data-score="2" class="xing"></span>
								
								
							</span>
						</p>     
					</dd>
					<dt>
					  <p>作业名称：<span>第三次</span></p></dt>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								<span data-score="3" class="xing"></span>
								
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								<span data-score="3" class="xing"></span>
								
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					<dd>
						<p>
						   <span class="tit">good</span>
						   <span class="time">完成时间：<time>2016-03-15</time></span>
						   <span class="yipigai">已批改</span></p>
						   <!--状态值   weitijiao yipigai yitijiao-->
						<p>
							<span>作业类型 : <b class="type">测试</b></span>
							<span class="degree">难度系数:
								
								<span data-score="3" class="xing"></span>
							</span>
						</p>
					</dd>
					
				</dl>
				<!--加载条-->
        	<div class="loading bottoLoading" ><span>正在加载...</span></div>
			</article>
			<footer>
				<p>
					<span catalog='class'>请选择</span>
					<img catalog='subject' src="../img/towards_right.png"style="display: none;"/> 
					<span catalog='subject' style="display: none;">请选择</span>
					<img catalog='unit' src="../img/towards_right.png" style="display: none;"/>
					<span catalog='unit' style="display: none;">请选择</span>
					<img catalog='section' src="../img/towards_right.png" style="display: none;"/>
					<span catalog='section' style="display: none;">请选择</span>
				</p>
			</footer>
		</div>
		<!--弹层 -->
		<!--del_down为公用clss名不要动，后面起自己控制的class,比如现在的warn-->
		<div class="List" style="display: none;">
		    <div class="hide"></div><!-- 这个是黑色遮罩 -->
		    <div class="con"><!-- 这的弹层大小 自己设置宽高 其他的不用设置  -->
		    	<!-- 这里写弹层的内容 -->
		    	
		    </div>
		</div>
		<script src="../js/jobIndex.js"></script>
		<script type="text/javascript">
		
		$(function(){
			//判断版本
			var Num=100;
			var userAgent = navigator.userAgent;
			var index = userAgent.indexOf("Android")
			if(index >= 0) {
				var androidVersion = parseFloat(userAgent.slice(index + 8));
				if(androidVersion <= 4.4) {
					Num = 10;
				} else {
					Num = 100;
				}
			}
			
		    var startY,endY;
		    var scrollTopVal=0; 
//		    document.getElementById("pullLoad").addEventListener("touchstart", touchStart, false);
//		    document.getElementById("pullLoad").addEventListener("touchmove", touchMove, false);
//		    document.getElementById("pullLoad").addEventListener("touchend", touchEnd, false);  
		    $('#pullLoad').on('touchstart',touchStart);
	        $('#pullLoad').on('touchmove',touchMove);
	        $('#pullLoad').on('touchend',touchEnd);
		    
		    function touchStart(event){
		        var touch = event.originalEvent.targetTouches[0];
		        startY = touch.pageY;
		    }   
		    var moveStatus = 0;
		    function touchMove(event){
		     var touch = event.originalEvent.targetTouches[0];
		     endY = (startY-touch.pageY);
		        if(endY>=Num&&moveStatus==0){
		        	startY = touch.pageY
		        	moveStatus=1;
		        	//注意  ：  當前節點的高度
		        	//滑動到低端
		            var totalheight = parseFloat($(window).height()) + parseFloat($(window).scrollTop());
		            if($(document).height()-75 <= totalheight){
		                $(".bottoLoading").show();
		                //ajax
//		                $.ajax({
//		                    url:"date.json",
//		                    type:'get',
//		                    success:function(date){
//		                        flag=false;
//		                    },
//		                    error:function(){
//		                 		$(".loading").show();
//		                        flag=false;
//		                    }
//		                });
		                
		                //模拟效果    可刪除。。。
		              setTimeout(function(){
		              	$(".bottoLoading").hide();
		              	moveStatus=0;
		              },500);
		            }
		         
		       }else if(endY<=-Num&&moveStatus==0&&!window.MOVE_DOWN){
		        	startY = touch.pageY
		        	moveStatus=1;
		        	if(parseFloat($(window).scrollTop())===0){
		        		$('.reload').show();
		        	}
		        	setTimeout(function(){
		              	$(".reload").hide();
		              	moveStatus=0;
		              },500);
		            
		        }else{
		        	moveStatus=0;
		        }
		    }
		    function touchEnd(event){
		    	moveStatus=0;		    
		    }
		});
		</script>
		
	</body>
</html>
